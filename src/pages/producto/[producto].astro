---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { products } from '../../data/products';
import EmblaIsla from '../../components/EmblaIsla.astro';

export async function getStaticPaths() {
  return products.map((product) => ({
    params: { producto: product.slug },
    props: { product },
  }));
}

const { product } = Astro.props;
---

<BaseLayout title={`${product.name} - Detalles`} description={product.description}>
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row gap-8">
    <!-- Foto del producto -->
    <div class="flex-1">
      <EmblaIsla images={product.images} name={product.name} client:load />
    </div>

    <!-- Información del producto -->
    <div class="flex-1">
      <h2 class="text-3xl font-bold mb-4">{product.name}</h2>
      <p class="text-2xl text-gray-800 mb-2">Precio: {product.price.toFixed(2)} €</p>
      <p class="text-gray-700 mb-4">{product.description}</p>
      <div class="mb-4">
        <p class="font-semibold">Stock Disponible: {product.stock}</p>
        <p class="font-semibold">Tallas Disponibles: {product.sizes.join(', ')}</p>
        <p class="font-semibold">Medidas: {product.measurements}</p>
      </div>
      <a
        href={`https://wa.me/tu-numero-de-telefono?text=Estoy%20interesado%20en%20el%20producto%20${encodeURIComponent(product.name)}`}
        class="inline-flex items-center px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 mt-4"
        target="_blank"
        rel="noopener noreferrer"
      >
        Contactar por WhatsApp
      </a>
    </div>
  </div>
</BaseLayout>